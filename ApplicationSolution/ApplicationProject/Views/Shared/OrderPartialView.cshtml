@model ApplicationProject.Models.Order

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - A Data Application</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script type="text/javascript">
        $(function () {

            var placeHolder = $('#PlaceHolder');
            $('button[data-toggle="modal"]').click(function (event) {
                placeHolder.change(function () {
                    $.validator.unobtrusive.parse("#createOrderForm");
                });
                var url = $(this).data('url');
                $.get(url).done(function (data) {
                    placeHolder.html(data);
                    placeHolder.find('.modal').modal('show');
                });
            });



            placeHolder.on('submit', 'button[type="submit"]', function (event) {
                var getForm = $(this).parents('.modal').find('form');
                var getUrl = getForm.attr('action');
                var theData = getForm.serialize();
                $.post(getUrl, theData).done(function (data) {
                    placeHolder.find('.modal').modal('show');
                });
            });

        });
    </script>

</head>
<body>
    <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-dark bg-dark">
        <div class="container">
            @Html.ActionLink("Application name", "Index", "Home", new { area = "" }, new { @class = "navbar-brand" })
            <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target=".navbar-collapse" title="Toggle navigation" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse d-sm-inline-flex justify-content-between">
                <ul class="navbar-nav flex-grow-1">
                    <li>@Html.ActionLink("Home", "Index", "Home", new { area = "" }, new { @class = "nav-link" })</li>
                    <li>@Html.ActionLink("Artworks", "Index", "Artworks", new { area = "" }, new { @class = "nav-link" })</li>
                    <li>@Html.ActionLink("Clients", "Index", "Clients", new { area = "" }, new { @class = "nav-link" })</li>
                    <li>@Html.ActionLink("Jobs", "Index", "Jobs", new { area = "" }, new { @class = "nav-link" })</li>
                    <li>@Html.ActionLink("Orders", "Index", "Orders", new { area = "" }, new { @class = "nav-link" })</li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container body-content">
        <div id="PlaceHolder"></div>
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#createOrder" data-url="@Url.Action("Create")">Create a Order</button>
        @using (Html.BeginForm(new { @id = "createOrderForm" }))
        {
            @Html.AntiForgeryToken()
            <div class="modal fade" id="createOrder" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title" id="createOrderlabel">Create a Order</h4>
                            <button type="button" class="close" data-bs-dismiss="modal">
                                <span>x</span>
                            </button>
                        </div>
                        <div class="modal-body">


                            <div class="form-horizontal">
                                <h4>Order</h4>
                                <hr />
                                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                                <div class="form-group">
                                    @Html.LabelFor(model => model.OrderNumber, htmlAttributes: new { @class = "control-label col-md-2" })
                                    <div class="col-md-10">
                                        @Html.EditorFor(model => model.OrderNumber, new { htmlAttributes = new { @class = "form-control" } })
                                        @Html.ValidationMessageFor(model => model.OrderNumber, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="form-group">
                                    @Html.LabelFor(model => model.OrderDate, htmlAttributes: new { @class = "control-label col-md-2" })
                                    <div class="col-md-10">
                                        @Html.EditorFor(model => model.OrderDate, new { htmlAttributes = new { @class = "form-control" } })
                                        @Html.ValidationMessageFor(model => model.OrderDate, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="form-group">
                                    @Html.LabelFor(model => model.Status, htmlAttributes: new { @class = "control-label col-md-2" })
                                    <div class="col-md-10">
                                        @Html.DropDownListFor(model => model.Status, new List<SelectListItem> { new SelectListItem { Text = "Ready", Value = "Ready" }, { new SelectListItem { Text = "In Progress", Value = "In Progress" } } }, optionLabel: "Select status", htmlAttributes: new { @class = "form-control" })
                                        @Html.ValidationMessageFor(model => model.Status, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="form-group">
                                    @Html.LabelFor(model => model.Client.Name, "Client Name", htmlAttributes: new { @class = "control-label col-md-2" })
                                    <div class="col-md-10">
                                        @Html.DropDownListFor(model => model.ClientId, null, htmlAttributes: new { @class = "form-control" })
                                        @Html.ValidationMessageFor(model => model.ClientId, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <br />

                            </div>

                            <div class="modal-footer">
                                <div class="form-group">
                                    <div class="col-md-offset-2 col-md-10">
                                        <button type="submit" class="btn btn-default" style="background-color:gainsboro">Create</button>
                                    </div>
                                </div>

                                <button type="button" class="btn btn-primary" data-bs-dismiss="modal" id="btnCancel">Cancel</button>

                            </div>


                        </div>
                    </div>

                </div>
            </div>
        }
        <hr />
        <footer>
            <p>&copy; @DateTime.Now.Year - My ASP.NET Application</p>
        </footer>
    </div>

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")

</body>
</html>
